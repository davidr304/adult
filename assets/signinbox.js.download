var Signinbox={recaptchaCompleted:!1,showCaptcha:!1,container:null,config:null,init:function(){if(this.container&&this.config){let e=this.container.querySelector(".js-signinUsername"),t=this.container.querySelector(".js-signinPassword"),i=this.container.querySelector(".js-loginSubmit"),n=this.container.querySelector(".passIcon");e.focus(),n&&n.addEventListener("click",function(){n.classList.contains("ph-icon-view-on")?(n.classList.remove("ph-icon-view-on"),n.classList.add("ph-icon-view-off"),t.type="password"):(n.classList.add("ph-icon-view-on"),n.classList.remove("ph-icon-view-off"),t.type="text")}),i.addEventListener("click",this.loginClickFunction.bind(this)),e.addEventListener("keydown",this.keyDownFunction.bind(this)),t.addEventListener("keydown",this.keyDownFunction.bind(this)),i.classList.contains("disabled")||(i.setAttribute("disabled","disabled"),i.classList.add("disabled")),e.addEventListener("input",this.inputFunction.bind(this)),t.addEventListener("input",this.inputFunction.bind(this)),e&&0<e.value.length&&e.dispatchEvent(new Event("input")),t&&0<t.value.length&&t.dispatchEvent(new Event("input"))}else console.error("container & config can't be null")},captchaAcknowledgement:function(e){if(e)switch(e){case"verified":this.recaptchaCompleted=!0,this.toggleButtonDisable(!1);break;case"expired":case"error":this.toggleButtonDisable(!0);break;default:return}},toggleButtonDisable:function(e){var t=this.container.querySelector(".js-loginSubmit");e?t.classList.add("disabled"):t.classList.remove("disabled")},toggleElementDisable:function(e,t,i){e=document.getElementById(e);i?e?.classList.contains("disabled")||e?.classList.add("disabled"):e?.classList.contains("disabled")&&e.classList.remove("disabled")},loginAjax:function(i="",n=""){var a=(e,t)=>{this.toggleButtonDisable(!0);let i={};""!==t?(i=Object.fromEntries(new FormData(document.querySelector(t))),0<e.length&&(i.sso_token=e)):i=Object.fromEntries(new FormData(document.querySelector(".js-loginForm"))),fetch(this.config.loginUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache"},body:new URLSearchParams(i)}).then(e=>e.json()).then(e=>this.loginAjaxSuccess(e)).catch(e=>this.loginFailed(e))};try{let e=this.container.querySelector(".g-recaptcha"),t=!e||!e.firstChild;null!=typeof CaptachaComponents&&function(){if(t)return!0;{let e=!1;return e=document.querySelectorAll(".g-recaptcha").length?0<CaptachaComponents.getCaptchaResponse(this.getCaptchaInstanceIndex()).length:e}}()&&a(i,n)}catch(e){a(i,n)}},setupTwoStepVerification:function(u){let e=".default2fa";switch(u.twoStepVerificationType){case"google2fa":e=".google2fa";break;case"email":e=".email2fa"}var h=document.querySelectorAll(e),g=document.querySelector(".js-userVerificationModal");if(g){g.parentElement?.classList.contains("modal-body")&&g.parentElement.classList.add("userVerificationModal");for(let e=0;e<h.length;e++)h[e]?.classList.contains("displayNone")&&h[e].classList.remove("displayNone");g.classList.remove("displayNone");let e=g.querySelector("#userPhoneNumber"),t=g.querySelector("#userEmail"),i=g.querySelector("#enterVerificationCode"),n=g.querySelector("#btnVerifyCode"),a=g.querySelector("#verificationEnabledUsername"),s=g.querySelector("#verificationEnabledEmail"),o=g.querySelector("#verificationEnabledToken"),c=g.querySelector("#resendVerificationCode"),r=g.querySelector("#authyIdHashed"),l=g.querySelector("#authyId"),d=g.querySelector(".contactSupportMail");if(c){if(g.dataset.type=u.twoStepVerificationType||"existingLegacy",e&&(e.innerHTML=u.phoneNumber),t&&(t.innerHTML=u.email),a&&o&&(a.value=u.username,o.value=u.autoLoginParameter),s&&o&&(s.value=u.email,o.value=u.autoLoginParameter),l&&r&&(l.value=u.authyId,r.value=u.authyIdHashed),i&&n&&(i.addEventListener("input",()=>{var e=""!==i.value?"remove":"add";n.classList[e]("disabled"),c.classList[e]("disabled")}),n.addEventListener("click",e=>{e.preventDefault(),n.classList.contains("disabled")||(n.classList.add("disabled"),c.classList.add("disabled"),this.loginTwoStepVerificationSend())}),i.addEventListener("keydown",e=>{var t=e.which||e.keyCode;13===t&&(e.preventDefault(),n.classList.contains("disabled")||(n.classList.add("disabled"),c.classList.add("disabled"),this.loginTwoStepVerificationSend())),69===t&&e.preventDefault()})),d){g=encodeURIComponent("Model Program - Two-Factor Authentication Issue");let e;e="models@pornhub.com"===u.supportEmail?"?subject="+g:"",d.href="mailto:"+u.supportEmail+e}c.addEventListener("click",this._twoStepVerificationResend.bind(this))}}},_twoStepVerificationResend:function(e){e.preventDefault();let t=document.querySelector("#authyIdHashed"),i=document.querySelector("#authyId"),n=document.getElementById("enterVerificationCode"),a=document.querySelector(".twoStepVerificationMessage.verificationError"),s=i.value,o=t.value,c=document.querySelector("#modalWrapMTubes .resendCodeResponse");this.toggleElementDisable("resendVerificationCode","disabled",!0),this.toggleElementDisable("btnVerifyCode","disabled",!0),n&&""!==n.value&&(n.value=""),a&&""!==a.innerHTML&&(a.innerHTML=""),fetch(this.config.urlResendCode,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authyId:s,authyIdHashed:o,token:this.config.token})}).then(e=>e.json()).then(e=>{c&&(c.classList.remove("displayNone"),this.toggleElementDisable("resendVerificationCode","disabled",!1),"success"!==e.status?(c.classList.add("verificationError"),c.querySelector(".resendCodeMessage").textContent=e.message):(c.classList.remove("verificationError"),c.classList.add("verificationSuccess"),c.querySelector(".resendCodeMessage").textContent=e.message,setTimeout(()=>c.classList.add("displayNone"),3e3)))}).catch(e=>this.loginFailed(e))},loginTwoStepVerificationSend:async function(){try{var e=new FormData(document.querySelector("#modalWrapMTubes .js-userVerificationModal")),t=await(await fetch(this.config.loginUrl,{method:"POST",body:e})).json(),i=document.querySelector("#modalWrapMTubes .twoStepVerificationMessage");i&&i.classList.remove("displayNone"),this.toggleElementDisable("resendVerificationCode","disabled",!1),"0"!=t.success?(i&&i.classList.contains("verificationError")&&i.classList.remove("verificationError"),i.classList.add("verificationSuccess"),i.innerHTML='<span class="greenLoader"></span>'+this.config.verificationSuccessfulMessage,this.callbackSuccess(t)):""!=t.message&&i?(i.classList.add("verificationError"),i.innerHTML=t.message):""==t.message&&(alert(this.config.ajaxError),document.location.reload())}catch(e){alert(this.config.ajaxError),document.location.reload()}},getCaptchaInstanceIndex:function(){let i=this.container.querySelector(".g-recaptcha"),n=0;return document.querySelectorAll(".g-recaptcha").length&&[].forEach.call(document.querySelectorAll(".g-recaptcha"),function(e,t){e===i&&(n=t)}),n},setupCaptacha:function(){var e=this.container.querySelector(".g-recaptcha");e&&null!=typeof CaptachaComponents&&(this.recaptchaCompleted?CaptachaComponents.resetCaptcha(this.getCaptchaInstanceIndex()):CaptachaComponents.registerComponent(e,this.captchaAcknowledgement.bind(this)))},premiumModalFromResponse:function(e){this.signInUtilModal&&this.signInUtilModal.closeModal(),this.toggleButtonDisable(!1)},callbackSuccess:function(e){},loginAjaxSuccess:function(e){},loginFailed:function(){this.toggleButtonDisable(!1),document.location.reload()},loginClickFunction:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var e=this.container.querySelector(".js-loginSubmit"),t=this.container.querySelector(".js-signinUsername"),i=this.container.querySelector(".js-signinPassword");e.classList.contains("disabled")||t&&0<t.value.length&&i&&0<i.value.length&&this.loginAjax()},inputFunction:function(e){var t=this.container.querySelector(".js-loginSubmit"),i=this.container.querySelector(".js-signinUsername"),n=this.container.querySelector(".js-signinPassword");i&&0<i.value.length&&n&&0<n.value.length?(t&&t.removeAttribute("disabled"),t.classList.remove("disabled")):(t&&t.setAttribute("disabled","disabled"),t.classList.add("disabled"))},keyDownFunction:function(e){13==(e.which||e.keyCode)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,this.container.querySelector(".js-loginSubmit").classList.contains("disabled")||this.loginAjax())}};